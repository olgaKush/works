<html><head>
<meta http-equiv="Expires" content="0">
<meta http-equiv="Pragma" content="no-cache">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="css/slider-properties.css" type="text/css" rel="stylesheet">
<link href="css/bootstrap/3.3.1/bootstrap.css" type="text/css" rel="stylesheet">
<link href="css/itim-theme.css" type="text/css" rel="stylesheet">
<script type="text/javascript" src="js/jquery/1.11.1/jquery.min.js"></script>
<script type="text/javascript" src="js/notify.js"></script>
<script type="text/javascript" src="js/bootstrap/3.3.1/bootstrap.min.js"></script>
<script type="text/javascript" src="js/bootstrap-select.js"></script>
<script type="text/javascript" src="js/respond.js"></script>
<script type="text/javascript" src="js/modernizr.js"></script>
<script type="text/javascript" src="js/bootstrap-slider.js"></script>
<script type="text/javascript" src="js/js.js"></script><style type="text/css"></style>

<title> Nomination of respondents</title>

</head><body>
<form action="p" method="POST" onsubmit="validate()">


       <br>
<table border="0" width="700" cellpadding="0" cellspacing="0" align="center">
    <tbody><tr>
        <td align="center">
        <script defer="defer" type="text/javascript" src="../jss/rsa/pngFix.js"></script>
 <div>
 <span class="style">
  <span class="style2"></span>
  <span class="style3"></span>
  <span class="style4"></span>
  <span class="style5"></span>
  <span class="style6"></span>
  <span class="style7"></span>
  <span class="style8"></span>
  <span class="style9"></span>
 </span>
</div>

<script language="javascript">
imgButtonDown = new Image();
imgButtonDown.src = "https://catalog.feedbackdialog.com/images/down2.png";

imgButtonUp = new Image();
imgButtonUp.src = "https://catalog.feedbackdialog.com/images/up2.png";

</script>


<!-- <table  border=0 width=700>
<tr>
 <td><img src="https://catalog.feedbackdialog.com/images/levyj.png" width="30" height="15" /></td>
  <td background="https://catalog.feedbackdialog.com/images/seredina.png" align=center width="670px" height="15"></td>
  <td><img src="https://catalog.feedbackdialog.com/images/pravyj.png" width="30" height="15" /></td>
 </tr></table>  -->


	<table class="main_form" border="0" width="700" cellpadding="0" cellspacing="0">
            <tbody><tr>
                <td>
                <table border="0" width="100%" cellpadding="0" cellspacing="0">
                    <!--start header -->
                    <tbody><tr>
                        <td>
                            <table border="0" width="100%" cellpadding="0" cellspacing="0">
                                <tbody><tr>
                                    <td align="left">
                                        <table border="0" width="100%" cellpadding="10" cellspacing="0">

                                            <tbody><tr>
                                                <!--logo -->
                                                <td>
                                                    <table class="logo" border="0" cellpadding="0" cellspacing="0" bgcolor="white">
                                                        <tbody><tr>
                                                            <td width="200px" height="70px" align="center">
                                                               <a href="http://www.feedbackcatalog.com" target="_blank"><img src="images/_f" alt="" title="" border="0"></a>
                                                            </td>
                                                           <td width="420px" align="center">
                                                              <!-- <table cellspacing=0 cellpadding=0 border="0">

									  <tr><td nowrap colspan=5 bgcolor=white></td></tr>

									  <tr height=7>
			  &nbsp;&nbsp;&nbsp;                                <td><img src="https://catalog.feedbackdialog.com/images/left_PB.PNG"></td><td width=30 bgcolor=6bcbff></td>
									    <td width=30 bgcolor=dddddd></td>
                							    <td width=30 bgcolor=dddddd></td>
                                                                            <td><img src="https://catalog.feedbackdialog.com/images/right_PB.PNG"></td>
									    <td><font face="arial" size="-3">&nbsp;33,3%</font></td>
									  </tr>

									  <tr><td nowrap colspan=5 bgcolor=white></td></tr>
									</table> -->
							   </td>

                                                            <td width="200px" height="50px" align="right" bgcolor="white">
                                                               <img align="right" src="">
                                                            </td>

                                                        </tr>
                                                    </tbody></table>
                                                </td>
                                                                                     </tr>

                                        </tbody></table>
                                    </td>
                                </tr>
                                <!--down image header-->
                                <tr>
                                    <td><img src="https://catalog.feedbackdialog.com/images/footerLine.png" width="100%"></td>
                                </tr>
                            </tbody></table>
                        </td>
                    </tr>
                    <!--end header -->
                    <!--start center column -->
                    <tr>
                        <td height="4"></td>
                    </tr>
                    <tr>
                        <td>
   <table width="700" border="0" cellpadding="0" cellspacing="0">
        <tbody><tr>
          <!--center white field-->
         <!-- <td width="4"><img src="../images/pixel1.gif" alt="" width="4" height="1"/></td>  -->
          <td valign="top" align="left">

            <!--========= START:center body===========-->



<table border="0" width="700" cellspacing="18" cellpadding="15" align="center">
<tbody><tr>
<td>
<!-- content begins -->
<span class="plaintext">
Dear evaluee,<br><br>
before starting with your self-evaluation, you have the option to define who should give feedback to you. Enter name, email address and role of the people from who you wish to get feedback from to the table below. The "role" of a person defines the relationship the person has towards you.<br>

<br><br>In your feedback report you will see the results by role. Please take into consideration that there need to be answers of at least 3 colleagues, 3 subordinates, 3 customers and 3 others to be shown separately in the report. If there are answers from less than 3 respondents from these roles, the results will only be shown in the group "all". <br><br>

Already nominated respondents (if any) are listed above the table.<br><br>

Your respondents:

</span>
<br><br>
<script type="text/javascript" src="img/jQueryLib/jquery-1.4.2.min.js"></script>

<div id="jason" style="display:none">[]</div><table class="plaintext">
<tbody><tr><th>First name</th><th>Last name</th><th>Email</th><th>Role</th></tr>

<script language="JavaScript">

var existingRespondentsJson = jQuery.parseJSON(jQuery("#jason").html());//#

jQuery.each(existingRespondentsJson,function(i) {
  var role = this.attribute_role;
  var rolle = "";
  if(role =="colleague") {
    rolle = 'Colleague';
  } else if ( role =="others") {
    rolle ='Other';
     } else if ( role =="customer") {
    rolle ='Customer';
     } else if ( role =="superior") {
    rolle ='Superior';
     } else if ( role =="subordinate") {
    rolle ='Subordinate';
     } else if ( role =="self") {
    rolle ='Self';
  }else {
    rolle = role;
  }
  document.write("<tr><td>" + this.firstName + "</td><td>" + this.lastName + "</td><td>"  + this.email + "</td><td>" + rolle + "</td></tr>" );

});

</script>
</tbody></table>

<span class="textarea_text"></span>
<!-- super -->

<input type="hidden" name="A2" id="superior">


<!--
<createrespondent>
sendemail invitation 290
attribute role superior
</createrespondent>
-->

<span class="textarea_text"></span>

<!-- col -->

<input type="hidden" name="A3" id="colleague">


<!--
<createrespondent>
sendemail invitation 290
attribute role colleague
</createrespondent>
-->
<span class="textarea_text"></span>

<!-- sub -->

<input type="hidden" name="A4" id="subordinate">


<!--
<createrespondent>
sendemail invitation 290
attribute role subordinate
</createrespondent>
-->

<span class="textarea_text"></span>
         <!--     cus -->
<input type="hidden" name="A5" id="customer">


<!--
<createrespondent>
sendemail invitation 290
attribute role customer
</createrespondent>
-->

<span class="textarea_text"></span>
    <!--      oth -->
<input type="hidden" name="A6" id="other">


<!--
<createrespondent>
sendemail invitation 290
attribute role others
</createrespondent>
-->

<script language="javascript">
    var wrongmail = 'Please check the email address field'
    var la = ""
    var currentRespId = -1;
    //*****************
    function addRespondent(no) {
	if (isNaN (no)) {
	  // Not A Number
	  var email =no;
	} else {
	  // A valid Number
	  var email ="";
	}

    	currentRespId++;
    	var toAddFirstName = "";
    	var toAddLastName = "";
    	var toAddEmail = "";
    	var toAdd ="";
    	if(email != "") {
    		if(isEmailCorrect(email)) {
				toAddEmail = email;
				var emailParts = email.split("@");
				var names = emailParts[0].split(".");
				toAddFirstName = names[0];
		    	toAddLastName = names[names.length-1];
		    }else {
		    	return;
		    }
    	}

        var tr = jQuery("<tr>").appendTo(jQuery("#resps_list"));

	var td = jQuery("<td>").appendTo(tr);
	jQuery("<input type='hidden'></input>").attr("name", "row" + currentRespId + "").attr("id", "row" + currentRespId + "").val("" + currentRespId).appendTo(td);
        jQuery('<input></input>').attr("size","15").attr("name", "respondents(" + currentRespId + ").fname").attr("id", "respondents(" + currentRespId + ").fname_id").val("").attr("class", "required").appendTo(td);
	td = jQuery("<td>").appendTo(tr);
        jQuery('<input></input>').attr("size","15").attr("name", "respondents(" + currentRespId + ").lname").attr("id", "respondents(" + currentRespId + ").lname_id").val("").attr("class", "required").appendTo(td);
	td = jQuery("<td>").appendTo(tr);
        jQuery('<input></input>').attr("size","30").attr("name", "respondents(" + currentRespId + ").email").attr("id", "respondents(" + currentRespId + ").email_id").val("").attr("class", "email required").appendTo(td);

	var radioOptionMap = {
          'superior': 'superior',
	  'colleague': 'colleague',
	  'subordinate': 'subordinate',
	  'customer': 'customer',
          'other': 'other'

	};
	jQuery.each(radioOptionMap, function(key, screenName) {
            td = jQuery("<td>").appendTo(tr);
            jQuery("<input type='radio' name='respondents(" + currentRespId + ").attributes(role)' />").val(key).attr("class", "required").appendTo(td);
	    //alert(screenName);
	    //td.append(screenName);
	});

        td = jQuery("<td>").appendTo(tr);
        jQuery("<a></a>").appendTo(td).html('<img src="img/rsa/icons/b_drop.png" alt="">').click(
                function () {
                    var tr = this.parentNode.parentNode;
                    tr.parentNode.removeChild(tr);
                    zebraTable(jQuery("#resps_list"));
                });


        zebraTable(jQuery("#resps_list"));
        jQuery("input[name='email']", tr).focus();
    }


    function doRadio() {

    }

    function isEmailCorrect(email) {
            var re = /^\w+([\.-]?\w+)*@(((([a-z0-9]{2,})|([a-z0-9][-][a-z0-9]+))[\.][a-z0-9])|([a-z0-9]+[-]?))+[a-z0-9]+\.([a-z]{2}|(com|net|org|edu|int|mil|gov|arpa|biz|aero|name|coop|info|pro|museum))$/i;
            return re.test(email);
    }

    function zebraTable(table) {
        jQuery("> tr:even", table).addClass("even").removeClass("odd");
        jQuery("> tr:odd", table).addClass("odd").removeClass("even");
    }

    //read respondent attributes and "move" to correct hidden field.
    //This method is to be called when page is submitted.
    function commitRespondents() {
        var respList = jQuery("#resps_list");

        var managers = jQuery("#superior").val("");
        var colleagues = jQuery("#colleague").val("");
        var subordinates = jQuery("#subordinate").val("");
        var customers = jQuery("#customer").val("");
        var others = jQuery("#other").val("");

	//alert(respList);
	//alert("cus" + customers);
	//alert("col" + colleagues);
	//alert("oth" + others);
	//alert("man" + managers);
	//alert("sub" + subordinates);

	var returnValue = true;


	jQuery('tr', respList).each(function (ii, row) {
	    //alert("ii " + ii);
	    //alert("row:" + row);
	    var rowId = jQuery('input:hidden', row).val();
	    //alert("rowId "  + rowId);
	    var role = jQuery("input:radio[name=respondents(" + rowId + ").attributes(role)]:checked").val();
	    //alert(role);
	    var fname = jQuery("input[name=respondents(" + rowId + ").fname]").val();
	    var lname = jQuery("input[name=respondents(" + rowId + ").lname]").val();
	    var email = jQuery("input[name=respondents(" + rowId + ").email]").val();

	    if(email == undefined) {
	    	    ;
	    	    //alert("undef");
	    }else{

	            if(email =="" && fname=="" && lname==""){
	                ;
	            }else {
		    if(!isEmailCorrect(email)) {
		        alert(wrongmail + email);
		        returnValue = false;
		        return false;
		    }

		    //alert("F: " + fname);

		    var respondent =""+ email + "#" + fname + "#" + lname + "#" + la;

		    var fieldWhereToAppend = "";

		    if(role==undefined) {
		        alert("Please enter a role for the respondent with the address:" + email);
		        returnValue = false;
		        return false;
		    }

		    //alert("ROLE:'" + role + "'");

		    if(role == 'superior') {
		        fieldWhereToAppend = managers;
		    }
		    if(role == 'colleague') {
		        fieldWhereToAppend = colleagues;
		    }
		    if(role == 'subordinate') {
		        fieldWhereToAppend = subordinates;
		    }
		    if(role == 'customer') {
		        fieldWhereToAppend = customers;
		    }
		    if(role == 'other') {
		        fieldWhereToAppend = others;
		    }

		    //alert("field to append " + fieldWhereToAppend + " " + respondent)
		    if(fieldWhereToAppend !="") {
                        //alert("before append: " + fieldWhereToAppend.val())
	                fieldWhereToAppend.val( fieldWhereToAppend.val() +";" + respondent);
		        //alert("after append: " + fieldWhereToAppend.val())
		    }else {
		       alert("This role is not properly supported by nomination process, please inform administrator: " + role)
		    }
		 }
	    }

	});

	return returnValue;

    }

    jQuery(document).ready(function() {
        addRespondent("");
    });

</script>
   <!--     save -->

<span class="inputfield_text"></span>

<input type="hidden" name="A8" id="hide" value="1">
<table class="bordered" id="rtable">
    <thead>
        <tr>
            <th rowspan="2">
                First name
            </th>
            <th rowspan="2">
                Last name
            </th>
            <th rowspan="2">
                Email
            </th>
            <th colspan="5">
                Role
            </th>
            <th rowspan="2">

            </th>

    	</tr>
        <tr>
	    <th>
                Superior
            </th>
            <th>
                Сolleague
            </th>
	    <th>
                Subordinate
            </th>
	    <th>
		Customer
            </th>
            <th>
                Other
            </th>

    	</tr>
    </thead>
    <tbody id="resps_list">
    <tr class="even"><td><input type="hidden" name="row0" id="row0" value="0"><input size="15" name="respondents(0).fname" id="respondents(0).fname_id" class="required"></td><td><input size="15" name="respondents(0).lname" id="respondents(0).lname_id" class="required"></td><td><input size="30" name="respondents(0).email" id="respondents(0).email_id" class="email required"></td><td><input type="radio" name="respondents(0).attributes(role)" value="superior" class="required"></td><td><input type="radio" name="respondents(0).attributes(role)" value="colleague" class="required"></td><td><input type="radio" name="respondents(0).attributes(role)" value="subordinate" class="required"></td><td><input type="radio" name="respondents(0).attributes(role)" value="customer" class="required"></td><td><input type="radio" name="respondents(0).attributes(role)" value="other" class="required"></td><td><a><img src="img/rsa/icons/b_drop.png" alt=""></a></td></tr></tbody>
    <tfoot>
	<tr>
	    <td colspan="10" class="buttonelement">
     	    	<input type="button" onclick="addRespondent('');return false;" value="Add row">
	    </td>
	</tr>
    </tfoot>
</table>

<style>

.fc_button{
	color: white; border: none; background: url( "../img/rsa/fc_button.png" ) no-repeat top left; padding: 4px 24px; cursor:pointer; width:120px
}


table.bordered {
    width: 100%;
    padding: 0px;
    border-spacing: 1px;
    margin: .5em 0px;
    background: #DDDDDD;
    border: 1px solid white; /*	border-bottom-width: 5px;   */
}

table.bordered thead th {
    text-align: left;
    font: bold 11px Arial, Helvetica, Verdana, sans-serif;
    color: #505050;
    padding: 4px;
    border-bottom: 1px solid #AAAAAA; /*border-left: 1px solid #f1f1f2;*/
    border-right: 1px solid #AAAAAA;
    background: url( "../img/rsa/menu_block_backgr.gif" ) repeat-x #AAAAAA;
    height: 28px;
}

table.bordered thead th a {
    font: bold 11px Arial, Helvetica, Verdana, sans-serif;
    color: #505050;
}

table.bordered td {
    padding: 4px 3px 4px 3px;
    margin: 0;
}

table.bordered tfoot td {
    text-align: left;
    font: 11px Arial, Helvetica, Verdana, sans-serif;
    color: white;
    padding: 2px;
    border-bottom: 1px solid black;
    background: url( "../img/rsa/table_bordered_footer.gif" ) repeat-x #858585;
    height: 28px;
}

table.bordered tbody tr.odd, table.odd, tr.odd table tr {
    background-color: white;
}

table.bordered tbody tr.even, table.even, tr.even table tr {
    background-color: #c2ecfc;
}

div.bordered {
    padding: 0;
    margin: 0;
    background: white;
}

table.smallPad td {
    margin: 0;
    padding: 2px 3px;
}

table.smallPad thead th {
    padding: 2px 4px;
    height: 25px;
    min-width: 6px;
}

table.smallPad tfoot td {
    height: 20px;
    padding: 2 4px 2 4px;
}

</style>

<span class="plaintext">
<br><br>
Push "Continue later", if you want to continue entering respondents at a later point of time.<br>

Push "Finish nomination" to stop nominating respondents and to start filling in your self
evaluation. If you wish to enter further respondents at a later stage, you can return to this
page by using the "back" buttons within the survey form, or on the last page of the survey form
after you finished your self evaluation.  <br>
<br>
As soon as you push any of the buttons below, invitation messages will be sent to the
respondents that you have entered.


</span>
<br><br>
<!-- content ends -->
</td>
</tr>
</tbody></table>
       <!--========= END:center body===========-->
           </td>
    </tr>
  <!--end center column -->
 </tbody></table>

</td>
               </tr>
               <tr width="100%"><td class="buttonelement" align="center">

	       <input type="hidden" name="pr1" id="actionId">

  <span class="plaintext" align="left">   </span>
	<input type="button" value="Back" onclick="if(commitRespondents('')){document.getElementById('actionId').name='pr';document.forms[0]} else {return false;}">

        <input type="button" value="Сontinue later" onclick="if(commitRespondents('')){document.getElementById('hide').value='';document.getElementById('actionId').name='sa';document.forms[0]} else {return false;}">

	<input type="button" value="Finish nomination" onclick="if(commitRespondents('')){document.getElementById('actionId').name='ne';document.forms[0]} else {return false;}">


	   <br><br><br></td></tr>
                </tbody></table>
                        </td>
                      </tr>
                       <tr>
                          <td>
                          </td>
                       </tr>
                   </tbody></table>
   <div>
  <span class="styl9">
  <span class="style8"></span>
  <span class="style7"></span>
  <span class="style6"></span>
  <span class="style5"></span>
  <span class="style4"></span>
  <span class="style3"></span>
  <span class="style2"></span>
  <span class="style"></span>
 </span>
</div>

		   <br>

	       </td></tr><tr>
                <td>
                    <div><img src="https://catalog.feedbackdialog.com/images/footerLine.png" width="100%"></div>
                </td>
              </tr>
               <!--end center column -->
               <!--footer-->
	       <tr>
                <td>
                   <table width="100%" border="0" cellpadding="0" cellspacing="0">
                       <tbody><tr>
                          <td></td>
                       </tr>
                       <tr>
                          <td>
                          </td>
                       </tr>
                       <tr>
                        <td>
                         <table class="footer" border="0" width="100%" cellpadding="0" cellspacing="0">
                            <tbody><tr>

                               <td>
                                 <table align="center" border="0" cellpadding="0" cellspacing="0">
                                    <tbody><tr>
                                       <td align="center" class="small_grey_text">
Copyright © by <a href="http://www.feedbackdialog.com" target="_blank">FeedbackDialog Oy</a> and <a href="http://www.feedbackdialog.com" target="_blank"></a>
                                       </td>
                                    </tr>
                                  </tbody></table>
                                  <table>
                                    <tbody><tr><td align="left">
				    <a href="http://www.feedbackdialog.com" target="_blank"></a>
				    </td><td></td></tr>
                                 </tbody></table>
                               </td>
                            </tr>


             <!--end footer-->
                </tbody></table>
             </td>
           </tr>
        </tbody></table>
      </td>
   </tr>
 </tbody></table>


</form>

</body></html>
